<div class="max-w-4xl mx-auto p-6 space-y-8">
  <!-- Selectores de Torneo y Fecha -->
  <div class="bg-white p-6 rounded-lg shadow-md space-y-4">
    <h2 class="text-2xl font-bold text-gray-800">Seleccionar Partido</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Torneo</label>
        <select [(ngModel)]="selectedTournament" class="w-full rounded-md border-gray-300 shadow-sm" (change)="onTournamentChange()">
          <option value="0">Seleccionar Torneo</option>
          <option *ngFor="let t of tournaments" [value]="t.id">{{ t.name }}</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Fecha</label>
        <select [(ngModel)]="selectedDate" class="w-full rounded-md border-gray-300 shadow-sm" [disabled]="!selectedTournament" (change)="onDateChange()">
          <option value="0">Seleccionar Fecha</option>
          <option *ngFor="let d of dates" [value]="d.id">{{ d.date | date:'dd/MM/yyyy' }}</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Listado de Partidos -->
  <div class="space-y-4" *ngIf="matches && matches.length > 0" [@fadeInOut]>
    <div *ngFor="let match of matches" 
         class="bg-white rounded-lg shadow-md transition-all duration-200 hover:shadow-lg">
      <div class="p-4 cursor-pointer" (click)="toggleMatch(match.id)">
        <div class="flex items-center justify-between">
          <div class="flex-1 text-center">
            <p class="font-bold text-lg">{{ match.localTeam }}</p>
            <p class="text-gray-500 text-sm">Local</p>
          </div>
          <div class="mx-4">
            <span class="text-xl font-bold">VS</span>
          </div>
          <div class="flex-1 text-center">
            <p class="font-bold text-lg">{{ match.visitorTeam }}</p>
            <p class="text-gray-500 text-sm">Visitante</p>
          </div>
        </div>
        <div class="mt-2 text-center text-sm text-gray-500">
          {{ match.date | date:'dd/MM/yyyy HH:mm' }}
        </div>
      </div>

      <!-- Formulario desplegable -->
      <div *ngIf="selectedMatchId === match.id" class="bg-gray-50 p-4 border-t">
        <!-- Sección de Goles -->
        <div class="mb-8">
          <h3 class="text-xl font-semibold mb-4">Registro de Goles</h3>
          <div class="bg-gray-100 p-4 rounded-lg">
            <form class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700">Jugador</label>
                <select [(ngModel)]="newGoal.player" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                  <option *ngFor="let p of players" [value]="p.id">{{ p.name }}</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700">Cantidad de Goles</label>
                <input type="number" [(ngModel)]="newGoal.goals" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
              </div>
              <div class="self-end">
                <button type="button" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600" (click)="addGoal(match.id)">
                  Agregar Gol
                </button>
              </div>
            </form>
            
            <!-- Lista de goles registrados -->
            <div class="mt-4 space-y-2">
              <div *ngFor="let goal of goals" class="flex items-center justify-between bg-white p-3 rounded shadow">
                <span>{{ goal.player.name }} - {{ goal.goals }} goles</span>
                <button class="text-red-500 hover:text-red-700" (click)="removeGoal(goal)">×</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Sección de Sanciones -->
        <div class="mb-8">
          <h3 class="text-xl font-semibold mb-4">Registro de Sanciones</h3>
          <div class="bg-gray-100 p-4 rounded-lg">
            <form class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700">Tipo de Sanción</label>
                  <div class="mt-1 space-x-4">
                    <label class="inline-flex items-center">
                      <input type="radio" name="sanction_type" value="P" [(ngModel)]="newSanction.type" class="text-blue-500">
                      <span class="ml-2">Jugador</span>
                    </label>
                    <label class="inline-flex items-center">
                      <input type="radio" name="sanction_type" value="T" [(ngModel)]="newSanction.type" class="text-blue-500">
                      <span class="ml-2">Equipo</span>
                    </label>
                  </div>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700">Razón</label>
                  <input type="text" [(ngModel)]="newSanction.reason" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                </div>
              </div>

              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700">Fechas de Suspensión</label>
                  <input type="number" [(ngModel)]="newSanction.missedDates" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                </div>
            
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Tarjetas Amarillas</label>
                    <select [(ngModel)]="newSanction.yellowCards" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                      <option value="0">0</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                    </select>
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Tarjetas Rojas</label>
                    <select [(ngModel)]="newSanction.redCard" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                      <option value="0">0</option>
                      <option value="1">1</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="md:col-span-2">
                <button type="button" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600" (click)="addSanction(match.id)">
                  Agregar Sanción
                </button>
              </div>
            </form>
            
            <div class="mt-4 space-y-2">
              <div *ngFor="let sanction of sanctions" class="flex items-center justify-between bg-white p-3 rounded shadow">
                <span>
                  {{ sanction.type === 'P' ? 
                    (sanction.player?.name || 'Jugador') : 
                    (sanction.team?.name || 'Equipo') 
                  }} - {{ sanction.missedDates }} fechas | 
                  {{ sanction.yellowCards }} Amarillas, 
                  {{ sanction.redCard }} Rojas
                </span>
                <button class="text-red-500 hover:text-red-700" (click)="removeSanction(sanction)">×</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Botón de guardado final -->
  <div class="flex justify-end">
    <button class="bg-green-500 text-white px-6 py-2 rounded-md hover:bg-green-600">
      Guardar Resultados
    </button>
  </div>
</div>
